---
title: goroutine
emoji: ğŸ§‘ğŸ»â€ğŸ’»
type: tech
topics: [Golang]
published: true
---


# ğŸ’¡ã“ã®è¨˜äº‹ã§ã‚ã‹ã‚‹ã“ã¨ãƒ»è§£æ±ºã™ã‚‹ã“ã¨


Golangåˆå¿ƒè€…ãªã®ã§å‚™å¿˜éŒ²ã‚‚å…¼ã­ã¦**goroutine**ã§é †åºã‚’è€ƒæ…®ã™ã‚‹å ´åˆã«ã©ã†ã™ã‚‹ã‹ã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚çµè«–ã‚’è¨€ã†ã¨å…ˆã«é †åºã‚’è€ƒæ…®ã—ãŸé…åˆ—ã‚’ä½œæˆã—ã¦ãã®é…åˆ—ã‚’æ“ä½œã™ã‚Œã°è‰¯ã„ã§ã™ã€‚


# ğŸ¤”é †ç•ªè€ƒæ…®ã—ãªã„ã‚³ãƒ¼ãƒ‰


å½“ç„¶ã¨ã„ãˆã°å½“ç„¶ã§ã™ãŒã€goroutineã¯**ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰**å®Ÿè¡Œãªã®ã§å®Ÿè¡Œä¸­ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ã¨é †ç•ªãŒãƒãƒ©ãƒãƒ©ã«ãªã‚Šã¾ã™ã€‚ã¾ã æ•°ãŒå°‘ãªã„ã®ã§ãƒã‚·ã§ã™ãŒã€Nã®æ•°ãŒå¢—ãˆã‚‹ã¨å½“ç„¶ã§ã™ãŒã€ã‚¹ãƒ¬ãƒƒãƒ‰ã‚‚å¢—ãˆã‚‹ã®ã§ã‚‚ã£ã¨ãƒãƒ©ãƒãƒ©ã«ãªã‚Šã¾**ã™ã€‚**

> ä¸¦åˆ—ã‹ä¸¦è¡Œã‹ã¯[ã“ã¡ã‚‰](https://qiita.com/ichi_zamurai/items/b8d137b681c2c9c2f946)ã®è¨˜äº‹ã‚’å‚ç…§ã™ã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚

```go
array := make([]int, 0)
for i := 0; i < 10; i++ {
	array = append(array, i)
}
log.Print(array)
// [0 1 2 3 4 5 6 7 8 9]

newArray := make([]int, 0)
eg := errgroup.Group{}
for _, i := range array {
	i := i
	eg.Go(func() error {
		newArray = append(newArray, i * 2)
		return nil
	})
}

if err := eg.Wait(); err != nil {
	log.Fatal(err)
}
log.Print(newArray)
// [18 0 2 4 6 8 10 12 14 16]
```



@[card](https://go.dev/play/p/KpvcJUc-IhG)



:::message
ã“ã¡ã‚‰ã§ã‚³ãƒ¡ãƒ³ãƒˆã•ã‚Œã¾ã—ãŸãŒã€ä¸Šã®ã‚³ãƒ¼ãƒ‰ã¯ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ã§ã¯ãªãå…±æœ‰ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚‹ã®ã§ã€ `sync.Mutex` ã§Lock~Unlockã‚’ã—ãŸã»ã†ãŒè‰¯ã„ã§ã™ğŸ™ [å‚è€ƒ](https://go-tour-jp.appspot.com/concurrency/9)
:::



https://twitter.com/yusuktan/status/1590912980287647744?t=aJVQnBezd3RkbnQwSPejRA&s=19



# âœŒï¸è€ƒæ…®ã—ãŸã‚³ãƒ¼ãƒ‰


arrayã®é…åˆ—ã®indexã‚’ä½¿ãˆã°é †åºã‚’ç¶­æŒã—ãŸã¾ã¾æ›´æ–°ã§ãã¾ã™ã€‚goroutineã®ä¸­ã§é…åˆ—ã‚’ä½œæˆã—ã‚ˆã†ã¨ã™ã‚‹ã¨ãƒãƒ©ãƒãƒ©ã«ãªã‚‹ã®ã§æ—¢ã«ä½œæˆã•ã‚Œã¦ã„ã‚‹é…åˆ—ãªã‚Šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé…åˆ—ã‚’æ“ä½œã—ãŸã»ã†ãŒè‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚


ã“ã®ã‚³ãƒ¼ãƒ‰ã¯arrayã‚’ãã®ã¾ã¾æ›´æ–°ã—ã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã«ã¯Aãƒ¢ãƒ‡ãƒ«ã‹ã‚‰Bãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã™ã‚‹ãªã‚“ã¦ã¨ãã«Aãƒ¢ãƒ‡ãƒ«ã‚’ã‚‚ã¨ã«Bãƒ¢ãƒ‡ãƒ«ã®é…åˆ—ã‚’ä½œæˆã—ã¦ãŠãã‚¤ãƒ¡ãƒ¼ã‚¸ã«ãªã‚Šã¾ã™ã€‚


```go
array := make([]int, 0)
for i := 0; i < 10; i++ {
	array = append(array, i)
}
log.Print(array)
// [0 1 2 3 4 5 6 7 8 9]

eg := errgroup.Group{}
for idx, i := range array {
	i := i
	idx := idx
	eg.Go(func() error {
		array[idx] = i * 2
		return nil
	})
}

if err := eg.Wait(); err != nil {
	log.Fatal(err)
}
log.Print(array)
// [0 2 4 6 8 10 12 14 16 18]
```



@[card](https://go.dev/play/p/iyYUVmh0VG2)



# ğŸŒï¸â€â™‚ï¸ãŠã‚ã‚Šã«


ã©ã¡ã‚‰ã‹ã¨ã„ã†ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤çš„ãªå†…å®¹ã ã‘ã©ã€‚ã€‚ã€‚


golangä½•ã‚‚è€ƒãˆãªãã¦ã‚‚ã™ã‚‰ã™ã‚‰æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ã€‚ã€‚ã€‚


# ğŸ“šä¸­ç´šè€…å‘ã‘ãªè‰¯æ›¸ãŸã¡


## Web Applicationã‚’å­¦ã³ãŸã„äººå‘ã‘



@[card](https://amzn.to/3Uklk3p)



## ä¸¦è¡Œå‡¦ç†ã‚’å­¦ã³ãŸã„äººå‘ã‘



@[card](https://amzn.to/3TmRABA)



# å‚è€ƒã‚µã‚¤ãƒˆ


[https://deeeet.com/writing/2016/10/12/errgroup/](https://deeeet.com/writing/2016/10/12/errgroup/)

